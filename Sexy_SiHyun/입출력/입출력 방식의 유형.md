# 입출력 방식의 유형

### 폴링(polling)

 폴링은 CPU가 자신과 연결 된 입출력 장치에서 무슨일이 있는지를 주기적으로 확인하는 방식이다.

* 장점: 구현이 간단하다.
* 단점: 연결되어 있는 입출력 장치의 개수가 증가할 수록 CPU를 점유하는 시간이 증가하여 성능이 하락한다.

### 인터럽트

입출력장치에서 자신이 필요할 때 마다  CPU에게 인터럽트 신호를 전송해서 순간순간 사용하는 방식이다.

* 장점: 필요할 때만 입출력 장치와 통신하고 남는 시간에 다른 일을 할 수 있으므로 폴링 방식에 비해 성능이 증가한다.


### Direct Memory Access (DMA)

* 메모리 버퍼, 포인터, 카운터를 사용하여 장치 제어기가 CPU의 도움없이 DMA컨트롤러를 이용하여 데이터를 직접 메모리로 전송하는 입출력 방식 

* CPU는 상태, 제어정보만을 교환하고 데이터 전송은 I/O와 메모리간에 직접 교환 


인터럽트를 적용해서 폴링에 단점인 CPU가용시간을 증가할 수 있다고 했다. 하지만 인터럽트방식은 1word 를 처리할 때 마다 CPU에 인터럽트 신호를 전송하는 방식이므로 여전히 CPU의 가용시간을 잡아먹고 있다. 

DMA를 이용하면 입출력 장치간 데이터를 주고받는 과정이 끝났을 때에만 인터럽트를 발생하므로 CPU의 역할을 현저히 줄일 수 있다.

기존에는 CPU에 여러 입출력 장치가 연결되어있었지만, 이제는 하나의 DMA에 여러 개의 입출력 장치가 연결되게 된다.

* 동작과정
  * CPU는 전송할 자료와 장소에 대한 위치를 나타내는 포인터와 전송될 바이트 크기를 DMA에 전송한다. 그러면 DMA는 해당 정보를 바탕으로 자신과 연결되어 있는 입출력 장치의 요구사항을 처리할 수 있어, CPU의 가용시간이 증가한다.
* 특징
  * 프로그램 수행 중 인터럽트의 발생 횟수 최소화하여 시스템 효율 증대
  * CPU는 DMA컨트롤러와 상태정보 및 제어 정보만 전송
  * CPU의 개입 없이 입출력 장치와 주 기억 장치와의 데이터 직접 전송

### DMA MODE 종류

1. Normal Mode
   * 일반적으로 가장 많이 사용되는 모드
   * DMA_CCRx 레지스터에 CIRC비트와 MEM2MEM비트가 설정되어 있지 않은 경우
   * 전송할 데이터 개수를 채널 설정시 정의하고, Enable비트를 활성화하면 송/수신이 됨
2. Circular Mode
   * Circular Mode는 원형 버퍼나 연속적인 데이터 처리에 사용됨
   * DMA_CCRx레지스터에 CIRC비트를 이용해서 활성화 가능
   * 전송할 데이터의 개수는 채널 설정하는 단계에서 자동으로 리로드 됨
   * DMA Request는 계속 일어남
   * ADC 값 같은 주기적으로 값을 가지고 오는 용도로 사용됨
3. Memory to Memory Mode
   * DMA 채널이 주변장치의 Request에 의해서 트리거 되지 않아도 작업이 가능
   * DMA_CCRx레지스터에 MEM2MEM비트를 이용해서 활성화 가능
   * DMA_CCRx레지스터에 Enable비트가 활성화되면 무조건 전송이 일어남
   * DMA_CNDTRx 레지스터가 0이되면 전송이 중지됨
   * 한 메모리 주소에 Rx와 Tx에 M2M모드가 동시 설정 불가

### DMA interrupt

1. Half-transter
   * 전체 전송 바이트 중 절반이 전송되었을 때 발생되는 인터럽트
2. Transfer complete
   * 전송이 완료되면 발생되는 인터럽트
3. Transfer error
   * 전송 중 오류가 일어났을 때 발생되는 인터럽트

[참고](http://blog.naver.com/PostView.nhn?blogId=golsm21&logNo=120141346669)

[참고](https://m.blog.naver.com/PostView.nhn?blogId=eziya76&logNo=220943681644&proxyReferer=https%3A%2F%2Fwww.google.co.kr%2F)

